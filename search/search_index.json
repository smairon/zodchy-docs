{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#code-blocks","title":"Code blocks","text":"<pre><code>def main():\n    print(\"Hello!!!\")  # (1)\n</code></pre> <ol> <li>:man_raising_hand: I'm a code annotation! I can contain <code>code</code>, formatted    text, images, ... basically anything that can be written in Markdown.</li> </ol>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"base/codex/","title":"Codex","text":"<p>Codex -  \u043d\u0430\u0431\u043e\u0440 \u0442\u0438\u043f\u043e\u0432 \u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0434\u043b\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439</p>"},{"location":"base/codex/#_1","title":"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","text":"<pre><code>from zodchy import codex\n</code></pre>"},{"location":"base/codex/#_2","title":"\u0421\u043e\u0441\u0442\u0430\u0432","text":"<ul> <li>cqea: \u043d\u0430\u0431\u043e\u0440 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f event driven CQRS \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440 </li> <li>query: \u043d\u0430\u0431\u043e\u0440 \u0431\u0430\u0437\u043e\u0432\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c</li> <li>di: \u043d\u0430\u0431\u043e\u0440 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 Dependency Injection</li> <li>identity: \u043d\u0430\u0431\u043e\u0440 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 Identity</li> </ul>"},{"location":"base/codex/#qea","title":"\u0421QEA","text":"<p>Command Query Event Actor - \u043d\u0430\u0431\u043e\u0440 \u0442\u0438\u043f\u043e\u0432 \u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0441\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f \u0440\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p>"},{"location":"base/codex/#_3","title":"\u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u0442\u0438\u043f\u044b","text":"<p>Message - \u0431\u0430\u0437\u043e\u0432\u0430\u044f \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435. \u041d\u0438\u0436\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430 \u0438\u0435\u0440\u0430\u0440\u0445\u0438\u044f \u0442\u0438\u043f\u043e\u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439</p> <p></p> <p>Actor - \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u0415\u0441\u0442\u044c \u0443\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430,  \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u0441\u044f \u0432 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f\u0445 \u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0440\u0443\u0433 \u0441 \u0434\u0440\u0443\u0433\u043e\u043c:</p> <ul> <li>Domain Actor</li> <li>Write Actor</li> <li>Read Actor</li> <li>AuditActor</li> </ul> <p>\u0423\u0442\u043e\u0447\u043d\u0435\u043d\u043d\u044b\u043c\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430\u043c\u0438 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u0437\u0430\u0434\u0430\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0443\u0437\u043a\u0443\u044e \u0437\u043e\u043d\u0443 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0430\u043a\u0442\u043e\u0440\u0430</p>"},{"location":"base/codex/#query","title":"Query","text":"<p>\u041d\u0430\u0431\u043e\u0440 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a \u0434\u0430\u043d\u043d\u044b\u043c</p>"},{"location":"base/codex/#bits","title":"Bits","text":"<p>\u041d\u0430\u0431\u043e\u0440 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u043e\u0432-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432 \u0434\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a \u0434\u0430\u043d\u043d\u044b\u043c</p> <ul> <li>FilterBit -  \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0430\u0431\u043e\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>OrderBit - \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0430\u0431\u043e\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>SliceBit - \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043d\u0430\u0431\u043e\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c:</p> <p><pre><code>import dataclasses\nimport datetime\n\nfrom zodchy.codex.query import (\n    Query,\n    FilterBit,\n    OrderBit,\n    SliceBit\n)\nfrom zodchy import operators\n\n@dataclasses.dataclass\nclass GetUsers(Query):\n    user_id: FilterBit[int] | None = None\n    user_name: FilterBit[str] | OrderBit | None = None\n    created_at: FilterBit[datetime.datetime] | OrderBit | None = None\n    limit: SliceBit | None = None\n\n# Form Query\nget_users_query = GetUsers(\n    user_id=operators.EQ(1),\n    user_name=operators.LIKE('jhon') + operators.DESC(1),\n    created_at=operators.ASC(2),\n    limit=operators.LIMIT(100)\n)\n</code></pre> \u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 GetUsers \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441 \u043a \u0434\u0430\u043d\u043d\u044b\u043c \u0441  - \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043f\u043e \u043f\u0440\u0438\u0437\u043d\u0430\u043a\u0430\u043c user_id, user_name, created_at, - \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0435 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u043d\u0430\u0431\u043e\u0440\u0430 \u043f\u043e \u043f\u0440\u0438\u0437\u043d\u0430\u043a\u0430\u043c user_name, created_at \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u043e\u0439 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0430, - \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u043d\u0430\u0431\u043e\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</p> <p>\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0443\u043b\u044f operators \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0437\u0434\u0435\u0441\u044c</p> <p>FilterBit \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f generic \u0442\u0438\u043f\u043e\u043c, \u0432 \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u043d\u044b\u0445 \u0441\u043a\u043e\u0431\u043a\u0430\u0445 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0442\u0438\u043f \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439. </p> <p>\u0412 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u043e\u043c \u043a\u043e\u0434\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0437\u0431\u0435\u0433\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430-\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (get_users_query) \u0432\u0440\u0443\u0447\u043d\u0443\u044e,  \u043b\u0443\u0447\u0448\u0435 \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u044b.</p> <p>\u0425\u043e\u0447\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044c, \u0447\u0442\u043e \u044d\u0442\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0432\u044b\u0441\u043e\u043a\u043e\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u044b\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c  \u0432 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0445 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438 \u043a\u0430\u043a \u0443\u0433\u043e\u0434\u043d\u043e. </p>"},{"location":"base/codex/#parsing","title":"Parsing","text":"<ul> <li>QueryType - \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c, \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0439  \u0438\u043b\u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u043c \u0438\u043c\u0435\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043d\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.</li> <li>TypesMapType - \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043d\u0430 \u0438\u0445 \u0442\u0438\u043f\u044b</li> <li>NotationParser - \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u043f\u0430\u0440\u0441\u0435\u0440\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c. \u041d\u0430 \u0432\u0445\u043e\u0434 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435  \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430\u043c QueryType \u0438 TypesMapType \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0438\u0439 \u0438\u0442\u0435\u0440\u0438\u0440\u0443\u0435\u043c\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u0441 \u043a\u043e\u0440\u0442\u0435\u0436\u0430\u043c\u0438 \u0438\u043c\u0435\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0438 \u0440\u0430\u0441\u043f\u0430\u0440\u0441\u0435\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0430\u0440\u0441\u0435\u0440\u0430 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0443\u0442</p>"},{"location":"base/codex/#di","title":"DI","text":"<ul> <li>DIContainerContract - \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 dependency injection \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430</li> <li>DIResolverContract - \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0440\u0435\u0437\u043e\u043b\u0432\u0435\u0440\u0430 dependency injection</li> </ul>"},{"location":"base/codex/#identity","title":"Identity","text":"<ul> <li>IdentifiersFactory - \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0444\u0430\u0431\u0440\u0438\u043a \u043f\u043e \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432.</li> </ul>"},{"location":"base/operators/","title":"Operators","text":"<p>\u041d\u0430\u0431\u043e\u0440 \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u0434\u043b\u044f \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0446\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</p> <p>\u0412\u043c\u0435\u0441\u0442\u043e \u0442\u044b\u0441\u044f\u0447\u0438 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0445 \u0441\u043b\u043e\u0432 \u043d\u0438\u0436\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d \u043f\u0440\u0438\u043c\u0435\u0440 \u043a\u043e\u0434\u0430, \u0434\u043b\u044f \u0438\u0437\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435.  \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u043a\u043b\u0430\u0441\u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430 \u0434\u0435\u043b\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0447\u0435\u043c \u0443\u0433\u043e\u0434\u043d\u043e (\u043f\u043e\u043b\u0435\u043c \u0411\u0414, \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u043c  query \u0432 http \u0437\u0430\u043f\u0440\u043e\u0441\u0435  \u0438 \u0442\u0434).  \u0423 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u0435\u0441\u0442\u044c \u0438\u043c\u044f \u0438 \u0435\u0441\u0442\u044c operator \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d \u043a \u0434\u0430\u043d\u043d\u044b\u043c \u044d\u0442\u043e\u0433\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430.  \u0412 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u0445 \u043a \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u043c\u044b\u0441\u043b \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430</p> <p><pre><code>import datetime\nimport dataclasses\n\nfrom zodchy import operators\nfrom zodchy import codex\n\n\n@dataclasses.dataclass\nclass Parameter:\n    name: str\n    operator: codex.query.ClauseBit\n\n\n@dataclasses.dataclass\nclass FilterIntParameter(Parameter):\n    operator: codex.query.FilterBit[int]\n\n\n@dataclasses.dataclass\nclass FilterDateParameter(Parameter):\n    operator: codex.query.FilterBit[datetime.datetime]\n\n\n@dataclasses.dataclass\nclass FilterStrParameter(Parameter):\n    operator: codex.query.FilterBit[str]\n\n\n@dataclasses.dataclass\nclass OrderParameter(Parameter):\n    operator: codex.query.OrderBit\n\n\n@dataclasses.dataclass\nclass SliceParameter(Parameter):\n    operator: codex.query.SliceBit\n\n\nparam1 = FilterIntParameter(\"user_id\", operators.EQ(1))  # user_id == 1\nparam2 = FilterIntParameter(\"user_id\", operators.NE(1))  # user_id != 1\nparam3 = FilterIntParameter(\"user_id\", operators.LE(1))  # user_id &lt;= 1\nparam4 = FilterIntParameter(\"user_id\", operators.GE(1))  # user_id &gt;= 1\nparam5 = FilterIntParameter(\"user_id\", operators.LT(1))  # user_id &lt; 1\nparam6 = FilterIntParameter(\"user_id\", operators.GT(1))  # user_id &gt; 1\nparam7 = FilterIntParameter(\"user_id\", operators.IS(None))  # user_id is None\n\nparam8 = FilterIntParameter(\"user_id\", operators.SET(1, 2, 3))  # user_id in (1, 2, 3)\n\nparam9 = FilterDateParameter(\n    \"birth_date\",\n    operators.RANGE(\n        operators.GE(datetime.datetime(1980, 1, 1)),\n        operators.LT(datetime.datetime(1990, 12, 31))\n    )\n)  # 1980-01-01 &gt;= birth_date &lt;= 1990-12-31\n\nparam10 = FilterStrParameter(\"name\", operators.LIKE('jhon', case_sensitive=True))  # user_id ilike 'jhon'\nparam11 = FilterStrParameter(\"name\", operators.LIKE('jhon', case_sensitive=False))  # user_id like 'jhon'\n\nparam12 = FilterIntParameter(\"status_id\", operators.NOT(operators.SET(1, 2)))  # status_id not in (1, 2)\n\nparam13 = OrderParameter(\n    \"created_at\", \n    operators.DESC(1)\n)  # order dataset by created_at with priority 1 (the smaller the priority)\n\nparam14 = SliceParameter(\"limit\", operators.LIMIT(100))  # limit dataset with 100 rows\nparam15 = SliceParameter(\"offset\", operators.OFFSET(10))  # skip 10 rows of dataset\n</code></pre> \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0432\u044b\u0448\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u043c\u043e\u0436\u043d\u043e \u0441\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u043a \u043f\u0440\u0438\u043c\u0435\u0440\u0443, \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u043a \u0434\u0430\u043d\u043d\u044b\u043c <pre><code>query = (\n    param4, \n    param9,\n    param12,\n    param13,\n    param14\n)\nbucket = \"users\"\nresult = some_kind_of_client.get_data(bucket, query)\n</code></pre> \u0417\u0434\u0435\u0441\u044c \u043c\u044b \u043f\u0440\u043e\u0441\u0438\u043c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043a\u043b\u0438\u0435\u043d\u0442 \u0441\u0445\u043e\u0434\u0438\u0442\u044c \u0432 \u043d\u0435\u043a\u0438\u0439 \u0431\u0430\u043a\u0435\u0442 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \"users\" \u0438 \u0432\u0435\u0440\u043d\u0443\u0442\u044c 100 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 id &gt;= 4,  \u0440\u043e\u0434\u0438\u0432\u0448\u0438\u0445\u0441\u044f \u0432 80-\u044b\u0435 \u0433\u043e\u0434\u044b \u043f\u0440\u043e\u0448\u043b\u043e\u0433\u043e \u0432\u0435\u043a\u0430, \u0441\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u043c \u043d\u0435 1 \u0438 \u043d\u0435 2, \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0434\u0430\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f.</p> <p>\u0417\u0430\u043c\u0435\u0442\u0438\u043c, \u0447\u0442\u043e \u043d\u0430\u0441 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u043d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0442 \u0442\u0438\u043f \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0434\u0430\u043d\u043d\u044b\u0445. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e \u0438 \u0433\u0434\u0435 \u0443\u0433\u043e\u0434\u043d\u043e,  \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u0446\u0435\u043b\u0438\u043a\u043e\u043c \u0432\u043d\u0443\u0442\u0440\u0438 some_kind_of_client \u0438 \u0432\u0441\u0435 \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e - \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c  iterable  of params \u0432 \u0441\u0435\u043c\u0430\u043d\u0442\u0438\u043a\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0443 (sql, mongo json, redis API \u0438 \u0442\u0434)</p> <p>\u0417\u0434\u0435\u0441\u044c \u043c\u044b \u043d\u0430\u043c\u0435\u0440\u0435\u043d\u043d\u043e \u043d\u0435 \u043a\u0430\u0441\u0430\u0435\u043c\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u0435\u0439 \u0432 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u043c \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0435, \u0442\u0430\u043a \u043a\u0430\u043a \u043a \u0441\u0435\u043c\u0430\u043d\u0442\u0438\u043a\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u044d\u0442\u043e \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f.</p>"},{"location":"base/types/","title":"Types","text":"<p>\u041d\u0430\u0431\u043e\u0440 \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u0434\u0430\u043d\u043d\u044b\u0445</p>"},{"location":"base/types/#empty","title":"Empty","text":"<p>\u0427\u0430\u0441\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0443 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438. None \u043d\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442,  \u0442\u0430\u043a \u043a\u0430\u043a \u0432 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438. \u0418 \u0442\u0443\u0442 \u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u0442\u0438\u043f Empty</p>"},{"location":"base/types/#_1","title":"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435","text":"<pre><code>import typing\n\nEmpty = typing.NewType('Empty', None)\n</code></pre>"},{"location":"base/types/#_2","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435","text":"<pre><code>import dataclasses\nimport random\n\nimport zodchy\n\n\n@dataclasses.dataclass\nclass User:\n    id: int\n    name: str\n    gender: int | None | zodchy.types.Empty = zodchy.types.Empty\n\n\nusers = [\n    User(1, \"Jhon\", 1),\n    User(1, \"Kate\", 2),\n    User(1, \"Predator\", None),\n    User(1, \"NoBody\"),\n]\n\nuser = users[random.randint(0, 3)]\n\nif user.gender is zodchy.types.Empty:\n    print(\"Please, define your gender\")\nelif user.gender is None:\n    print(\"What the fuck are you?!\")\nelse:\n    print(f\"Hello, {\"mister\" if user.gender == 1 else \"madam\"} {user.name}\")\n</code></pre>"},{"location":"components/cqea/pancho/","title":"Pancho","text":""},{"location":"components/di/zorge/","title":"Zorge","text":"<p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 Dependency Injection \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u0430. </p>"},{"location":"components/di/zorge/#_1","title":"\u0418\u0434\u0435\u044f","text":"<p>\u0414\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0447\u0430\u0441\u0442\u043e \u0432 \u043a\u043e\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u0442\u044c \u043c\u0430\u0442\u0440\u0435\u0448\u043a\u0438 \u0432\u0438\u0434\u0430</p> <p><pre><code>import typing\n\n\nclass DBConnection:\n    def execute(self, query: str):\n        pass\n\n\nclass DBEngine:\n    def __init__(self, dsn: str):\n        self._dsn = dsn\n\n    def connect(self) -&gt; DBConnection:\n        pass\n\n\nclass Repository:\n    def __init__(self, db_connection: DBConnection):\n        self._db_connection = db_connection\n\n    def get_entity(self) -&gt; typing.Any:\n        pass\n\n\nclass Service:\n    def __init__(self, repository: Repository):\n        self._repository = repository\n\n    def do_some_stuff(self):\n        pass\n\n    # \u0422\u0435\u043f\u0435\u0440\u044c \u0432 \u043b\u044e\u0431\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0433\u0434\u0435 \u043c\u044b \u0437\u0430\u0445\u043e\u0442\u0438\u043c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0441\u0435\u0440\u0432\u0438\u0441\u0430, \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u044f\u0432\u043d\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u044e \u044d\u0442\u0443 \u043f\u0438\u0440\u0430\u043c\u0438\u0434\u0443\n\n\ndef foo_endpoint(dsn: str):\n    service = Service(\n        repository=Repository(\n            db_connection=DBEngine('postgresql://user:pass@127.0.0.1:5432/mydb').connect()\n        )\n    )\n\n\ndef boo_endpoint():\n    service = Service(\n        repository=Repository(\n            db_connection=DBEngine('postgresql://user:pass@127.0.0.1:5432/mydb').connect()\n        )\n    )\n</code></pre> \u0414\u0430, \u043c\u043e\u0436\u043d\u043e \u0432\u043d\u0435\u0434\u0440\u044f\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441 \u0447\u0435\u0440\u0435\u0437 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0444\u0443\u043d\u043a\u0446\u0438\u0438</p> <pre><code>def foo_endpoint(service: Service):\n    pass\n</code></pre> <p>\u041d\u043e, \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u0433\u0434\u0435-\u0442\u043e \u0432 \u043a\u043e\u0434\u0435 \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f \u0432\u0441\u0435\u0439 \u044d\u0442\u043e\u0439 \u0443\u0442\u043e\u043c\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0435\u0439 <pre><code># ... somewhere in code's jungle\nservice = Service(\n    repository=Repository(\n        db_connection=DBConnection(\n            engine=DBEngine('postgresql://user:pass@127.0.0.1:5432/mydb'),\n        )\n    )\n)\nendpoint = foo_endpoint(service)\n</code></pre></p> <p>\u0412\u043e\u0442 \u0431\u044b\u043b\u043e \u0431\u044b \u0437\u0434\u043e\u0440\u043e\u0432\u043e \u0435\u0441\u043b\u0438 \u043a\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u043c\u043e\u0433 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0440\u0435\u0437\u043e\u043b\u0432\u0438\u0442\u044c \u0432\u0441\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438  \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0441\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u0441\u0435\u0440\u0432\u0438\u0441\u0430. </p>"},{"location":"components/di/zorge/#_2","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u043c \u0431\u0435\u0437\u0434\u0443\u043c\u043d\u043e \u0431\u0440\u043e\u0441\u0430\u0442\u044c\u0441\u044f \u0441\u0440\u0430\u0437\u0443 \u043f\u0438\u0441\u0430\u0442\u044c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e, \u0430 \u043d\u0430\u0447\u043d\u0435\u043c \u0441 \u0432\u0434\u0443\u043c\u0447\u0438\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. </p> <p>\u041f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c, \u0447\u0442\u043e \u043c\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043b\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u043f\u0430\u0440\u043e\u0447\u043a\u0443 \u0431\u0438\u0437\u043d\u0435\u0441 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439 <pre><code># file: entities.py\n\nimport datetime\nimport dataclasses\n\n@dataclasses.dataclass\nclass Entity:\n    id: int\n\n\n@dataclasses.dataclass\nclass FooEntity(Entity):\n    name: str\n    birthdate: datetime.datetime\n\n\n@dataclasses.dataclass\nclass BooEntity(Entity):\n    title: str\n    publish_date: datetime.datetime\n</code></pre></p> <p>\u0417\u0430\u0432\u0435\u0434\u0435\u043c \u0444\u0430\u0439\u043b\u0438\u043a contracts.py \u0438 \u0442\u0430\u043c \u043e\u043f\u0438\u0448\u0435\u043c \u043a\u0440\u0443\u043f\u043d\u044b\u043c\u0438 \u043c\u0430\u0437\u043a\u0430\u043c\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u043d\u044b\u0435  \u0447\u0430\u0441\u0442\u0438 \u043d\u0430\u0448\u0435\u0439 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b (\u0432 \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0435 \u043a \u044d\u0442\u0438\u043c \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044f\u043c) \u0438 \u0438\u0445 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435</p> <pre><code># file: contracts.py\nimport typing\nfrom .entities import (\n    Entity, \n    FooEntity, \n    BooEntity\n)\n\n\nclass DBConnectionContract(typing.Protocol):\n    def execute(self, query: str): ...\n\n\nclass DBEngineContract(typing.Protocol):\n    def connect(self) -&gt; DBConnectionContract: ...\n\n\nclass RepositoryContract(typing.Protocol):\n    def get_entity(self) -&gt; Entity: ...\n\n\nclass ServiceContract(typing.Protocol):\n    def do_some_stuff(self): ...\n\n\nclass FooRepositoryContract(RepositoryContract):\n    def get_entity(self) -&gt; FooEntity: ...\n\n\nclass BooRepositoryContract(RepositoryContract):\n    def get_entity(self) -&gt; BooEntity: ...\n</code></pre> <p>\u0418\u043c\u0435\u044f \u0442\u0430\u043a\u0438\u0435 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u044b, \u043d\u0430\u043c \u043d\u0438\u0447\u0442\u043e \u043d\u0435 \u043c\u0435\u0448\u0430\u0435\u0442 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u0445 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438. \u0422\u0430\u043a \u043a\u0430\u043a python, \u043a \u0441\u0447\u0430\u0441\u0442\u044c\u044e,  \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432\u0441\u044e \u043c\u043e\u0449\u044c \u0443\u0442\u0438\u043d\u043e\u0439 \u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u0438, \u0443 \u043d\u0430\u0441 \u043d\u0435\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u044b \u0432 \u043a\u043b\u0430\u0441\u0441\u0430\u0445 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438,  \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0432\u043e\u043f\u043b\u043e\u0442\u0438\u0442\u044c \u0432 \u043a\u043e\u0434\u0443 \u043c\u0435\u0442\u043e\u0434\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0435\u0441\u0442\u044c \u0432 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430\u0445.</p> <p>\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0430\u043c \u0431\u0443\u0434\u0443\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442\u044b engine \u0438 connection \u043d\u0443\u0436\u043d\u044b\u0445 \u043d\u0430\u043c \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u043e\u0432 <pre><code>#file: implementations/storage.py\nfrom ..contracts import DBEngineContract, DBConnectionContract\n\ndef create_db_engine(dsn: str) -&gt; DBEngineContract:\n    # prepare and return the database engine\n    pass\n\ndef get_connection(engine: DBEngineContract) -&gt; DBConnectionContract:\n    # get connection from engine pool\n    pass\n\ndef close_connection(connection: DBConnectionContract):\n    # do work for graceful shutdown of connection\n    pass\n</code></pre></p> <p>\u0414\u0430\u043b\u0435\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u043c \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438 <pre><code># file: implementations/repositories.py\nfrom ..entities import FooEntity, BooEntity\nclass FooRepository:\n    def get_entity(self) -&gt; FooEntity:\n        # implementation\n        pass\n\n\nclass BooRepository:\n    def get_entity(self) -&gt; BooEntity:\n        # implementation\n        pass\n</code></pre></p> <p>\u0412\u0438\u0434\u043d\u043e, \u0437\u0434\u0435\u0441\u044c \u043c\u043e\u0434\u0443\u043b\u044c \u0441 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430\u043c\u0438 \u043c\u044b \u0434\u0430\u0436\u0435 \u043d\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c. \u041d\u0430\u043c \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f -  \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u043c\u0435\u0442\u043e\u0434\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430-\u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430. \u0414\u0430\u043b\u0435\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u043c \u0441\u0435\u0440\u0432\u0438\u0441, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c\u0438.</p> <pre><code># file: implementations/services.py\nfrom ..contracts import FooServiceContract, BooServiceContract\n\nclass Service:\n    def __init__(self, foo_repo: FooServiceContract, boo_repo: BooServiceContract):\n        self._foo_repo = foo_repo\n        self._boo_repo = boo_repo\n\n    async def do_some_stuff(self):\n        # do some stuff with foo and boo repositories \n        pass\n</code></pre> <p>\u0412\u0430\u0436\u043d\u043e \u043f\u043e\u043c\u043d\u0438\u0442\u044c, \u0447\u0442\u043e \u043c\u044b \u043f\u043e-\u043f\u0440\u0435\u0436\u043d\u0435\u043c\u0443 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u044b, \u0445\u043e\u0442\u044c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u044d\u0442\u0438\u0445 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u043e\u0432 \u0438 \u043b\u0435\u0436\u0438\u0442 \u0432 \u0444\u0430\u0439\u043b\u0435 \u0440\u044f\u0434\u043e\u043c.</p> <p>\u0418 \u0442\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0433\u0434\u0435-\u0442\u043e \u0441\u0432\u044f\u0437\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u044b \u0441 \u0438\u0445 \u0438\u043c\u043f\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f\u043c\u0438. \u0412 \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u043b\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c  \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0441\u043b\u043e\u0432\u0430\u0440\u0438\u043a \u0441 \u043a\u043b\u044e\u0447\u0430\u043c\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430\u043c\u0438 \u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f\u043c\u0438 \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0432\u0435\u0437\u0434\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430.  \u041d\u043e, \u0432 \u0442\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0432\u043e\u043f\u0440\u043e\u0441 \u0441 \u0446\u0435\u043f\u043e\u0447\u043a\u043e\u0439 \u0440\u0435\u0437\u043e\u043b\u0432\u0438\u043d\u0433\u0430 \u043f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u0431\u044b \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u0440\u0435\u0448\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e  (\u043a\u043e\u043f\u0438\u043f\u0430\u0441\u0442\u043e\u0439, \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043d\u043e \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u043d\u0435 \u0441\u0438\u043b\u044c\u043d\u043e \u044d\u0441\u0442\u0435\u0442\u0438\u0447\u043d\u043e). </p> <p>\u0410 \u0447\u0442\u043e \u0435\u0441\u043b\u0438 \u0432\u0437\u044f\u0442\u044c \u044d\u0442\u043e\u0442 \u0441\u043b\u043e\u0432\u0430\u0440\u0438\u043a, \u043e\u0431\u0435\u0440\u043d\u0443\u0442\u044c \u0435\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u043e\u043c, \u043d\u0430\u0437\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u043c \u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u043d\u0435\u043c \u0432\u0441\u0435 \u043d\u0430\u0448\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438? \u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c</p> <pre><code>#file: provision.py\nimport zorge\nfrom . import contracts, implementations\n\ncontainer = zorge.Container()\ncontainer.register_dependency(\n    contract=contracts.DBEngineContract,\n    implementation=implementations.storage.create_db_engine('postgresql://user:pass@127.0.0.1:5432/mydb'),\n    cache_scope='container'\n)\ncontainer.register_dependency(\n    contract=contracts.DBConnectionContract,\n    implementation=implementations.storage.get_connection,\n    cache_scope='resolver'\n)\ncontainer.register_dependency(\n    contract=contracts.FooRepositoryContract,\n    implementation=implementations.core.FooRepository\n)\ncontainer.register_dependency(\n    contract=contracts.BooRepositoryContract,\n    implementation=implementations.core.BooRepository\n)\ncontainer.register_dependency(\n    contract=contracts.ServiceContract,\n    implementation=implementations.core.Service\n)\n</code></pre> <p>\u0418 \u043a\u0430\u043a-\u0431\u044b \u0432\u0441\u0435, \u0442\u0435\u043f\u0435\u0440\u044c \u044d\u0442\u043e\u0442 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0432 \u043b\u044e\u0431\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c  \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043f\u0440\u043e\u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u044b \u043f\u043e \u0438\u0445 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430\u043c.</p> <pre><code># file: endpoints.py\nimport zorge\nfrom . import contracts\n\nasync def foo_endpoint(container: zorge.Container):\n    async with container.get_resolver() as resolver:\n        service = resolver.resolve(contracts.ServiceContract)\n        service.do_some_stuff()\n</code></pre> <p>\u0420\u0435\u0437\u043e\u043b\u0432\u0435\u0440 zorge \u0441\u0434\u0435\u043b\u0430\u043d \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u043c, \u0442\u0430\u043a \u043a\u0430\u043a \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0435 \u0432\u044b\u0437\u043e\u0432\u044b \u0432 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u043c \u043a\u043e\u0434\u0435 \u0432\u043f\u043e\u043b\u043d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b  (\u043d\u043e \u043d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0435\u043c \u043f\u0440\u043e \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0443 \u0438\u0432\u0435\u043d\u0442 \u043b\u0443\u043f\u0430 CPU bound \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u043c\u0438), \u0430 \u0432\u043e\u0442 \u0434\u0438\u0441\u043a\u043e\u0442\u0435\u043a\u0443 \u043d\u0430\u043e\u0431\u043e\u0440\u043e\u0442 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u0430\u0442\u044c  \u043d\u0435 \u0432 \u043f\u0440\u0438\u043c\u0435\u0440 \u0441\u043b\u043e\u0436\u043d\u0435\u0435. \u0414\u0430 \u0438 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b \u043b\u0443\u0447\u0448\u0435 \u0438\u0437\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u043c\u0438.</p>"},{"location":"components/notations/query/math/","title":"Query math notation","text":"<p>\u041d\u043e\u0442\u0430\u0446\u0438\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c, \u0432\u0434\u043e\u0445\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0430\u044f \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043f\u0443\u043d\u043a\u0442\u0443\u0430\u0446\u0438\u0435\u0439.  \u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u043e\u0434\u043d\u0443 \u0441\u0442\u0440\u043e\u043a\u0443 \u0432 \u0432\u0438\u0434\u0435  <pre><code>k1=v1&amp;k2=v2..&amp;kn=vn\n</code></pre></p> <ul> <li>ki - \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 i-\u043e\u0433\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430</li> <li>vi - \u0442\u043e\u043a\u0435\u043d i-\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f</li> </ul> <p>\u0412 \u0441\u043e\u0441\u0442\u0430\u0432 \u0442\u043e\u043a\u0435\u043d\u0430 \u043f\u043e\u043c\u0438\u043c\u043e \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432\u0445\u043e\u0434\u044f\u0442 \u0441\u0438\u043c\u0432\u043e\u043b\u044b, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e \u043d\u0430\u0434 \u044d\u0442\u0438\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c</p>"},{"location":"components/notations/query/math/#_1","title":"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":""},{"location":"components/notations/query/math/#_2","title":"\u0420\u0430\u0432\u0435\u043d\u0441\u0442\u0432\u043e","text":"<p><pre><code>user_id=1\ncreated_at=2024-07-04T12:12:12\nbirth_date=1970-01-01\n</code></pre> \u0417\u0430\u0434\u0430\u0435\u0442 \u0440\u0430\u0432\u0435\u043d\u0441\u0442\u0432\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u043e\u043f\u0435\u0440\u0430\u043d\u0434\u0443 \u0441\u043f\u0440\u0430\u0432\u0430 \u043e\u0442 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0432 =</p>"},{"location":"components/notations/query/math/#_3","title":"\u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d","text":"<p><pre><code>birth_date=[1970-01-01,2000-01-01] # same as: 1970-01-01 &lt;= birth_date &lt;= 2000-01-01 \nbirth_date=(1970-01-01,2000-01-01] # same as: 1970-01-01 &lt; birth_date &lt;= 2000-01-01 \nbirth_date=[1970-01-01,2000-01-01) # same as: 1970-01-01 &lt;= birth_date &lt; 2000-01-01 \nbirth_date=(1970-01-01,2000-01-01) # same as: 1970-01-01 &lt; birth_date &lt; 2000-01-01 \n</code></pre> \u0417\u0430\u0434\u0430\u0435\u0442 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430.  \u041f\u043e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0438 \u0441 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c, \u043f\u043e\u043b\u0443\u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430\u043c\u0438 \u0438 \u043e\u0442\u0440\u0435\u0437\u043a\u043e\u043c</p>"},{"location":"components/notations/query/math/#_4","title":"\u0411\u043e\u043b\u044c\u0448\u0435/\u041c\u0435\u043d\u044c\u0448\u0435","text":"<p><pre><code>birth_date=[1970-01-01,) # same as: birth_date &gt;= 1970-01-01\nbirth_date=(1970-01-01,) # same as: birth_date &gt; 1970-01-01\nbirth_date=(,2000-01-01] # same as: birth_date &lt;= 2000-01-01\nbirth_date=(,2000-01-01) # same as: birth_date &lt; 2000-01-01\n</code></pre> \u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435\u0440\u0430\u0432\u0435\u043d\u0441\u0442\u0432\u0430 \u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0430, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043e\u0434\u043d\u0430 \u0438\u0437 \u0433\u0440\u0430\u043d\u0438\u0446 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442  (\u0442.\u0435. \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u0430 \u0441 \u0441\u043e\u043e\u0442\u0432\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u0437\u043d\u0430\u043a\u043e\u043c )</p>"},{"location":"components/notations/query/math/#_5","title":"\u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e","text":"<p><pre><code>tag_id={1,2,3,4} # same as: tag_id in (1,2,3,4)\nuser_id={1,2} # same as: user_id in (1, 2)    \n</code></pre> \u0417\u0430\u0434\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0435 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430</p>"},{"location":"components/notations/query/math/#_6","title":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u0443","text":"<p><pre><code>name=~james # same as: name ilike '%james%'\nname=~~james # same as: name like '%james%'\n</code></pre> \u0417\u0430\u0434\u0430\u0435\u0442 \u0448\u0430\u0431\u043b\u043e\u043d \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430</p>"},{"location":"components/notations/query/math/#_7","title":"\u041e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435 (\u0438\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435)","text":"<p><pre><code>birth_date=!1970-01-01 # same as: birth_date != 1970-01-01\ntag_id=!{1,2,3,4} # same as: tag_in not in (1,2,3,4)\nname=!~james # same as: name not ilike '%james%'\nbirth_date=![1970-01-01, 2000-01-01] # same as: birth_date &lt; 1970-01-01 or birth_date &gt; 2000-01-01\n</code></pre> \u0417\u0430\u0434\u0430\u0435\u0442 \u0438\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0430\u0434 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430</p>"},{"location":"components/notations/query/math/#_8","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430","text":"<p><pre><code>user_id=1&amp;state={active,pending}&amp;created_at=(,2024-07-01T00:00:00)\n</code></pre> \u0417\u0434\u0435\u0441\u044c \u043c\u044b \u0438\u0449\u0435\u043c \u0437\u0430\u043f\u0438\u0441\u0438 \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 user_id=1, state \u043b\u0438\u0431\u043e active \u043b\u0438\u0431\u043e pending,  \u0430 created_at \u0441\u0442\u0430\u0440\u0448\u0435 2024-07-01T00:00:00</p>"},{"location":"components/notations/query/math/#_9","title":"\u041f\u0430\u0440\u0441\u0435\u0440","text":"<p>\u0414\u043b\u044f \u0441\u0442\u0435\u043a\u0430 zodchy \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d  \u043f\u0430\u0440\u0441\u0435\u0440 \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u043e\u0442\u0430\u0446\u0438\u0438</p>"},{"location":"components/notations/query/math/#_10","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p><pre><code>import datetime\n\nimport zodchy_notations\n\nparser = zodchy_notations.query.math.Parser()\n\nquery = \"user_id=1&amp;state={active,pending}&amp;created_at=(,2024-07-01T00:00:00)\"\ntokens = list(\n    parser(\n        query=query, \n        types_map={'user_id': int, 'state': str, 'created_at': datetime.datetime}\n    )\n)\n# Result:\n# [\n#   (user_id, zodchy.operators.EQ(1)),\n#   (state, zodchy.operators.SET('active', 'pending')),\n#   (\n#       created_at, \n#       zodchy.operators.RANGE(\n#           None, \n#           zodchy.operators.LT(datetime.datetime(2024, 07, 1))\n#       )\n#    )\n# ]\n</code></pre> \u0414\u0430\u043b\u0435\u0435 \u043d\u0430\u0431\u043e\u0440 \u044d\u0442\u0438\u0445 \u043a\u043e\u0440\u0442\u0435\u0436\u0435\u0439 \u043c\u043e\u0436\u043d\u043e \u0441\u043a\u043e\u0440\u043c\u0438\u0442\u044c \u043d\u0430 \u0432\u0445\u043e\u0434 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442  \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u044d\u0442\u0438\u0445 \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0434\u0440\u0443\u0433\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (sql, mongoQL, Redis API, plain text filters, etc)</p> <p>\u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c  \u0430\u0434\u0430\u043f\u0442\u0435\u0440  Request \u043c\u043e\u0434\u0435\u043b\u0435\u0439 FastAPI \u0432 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 CQEA \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b.</p>"},{"location":"components/storage/hermitage/","title":"Hermitage","text":"<p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438 \u043a \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430\u043c \u0434\u0430\u043d\u043d\u044b\u0445. </p>"},{"location":"components/storage/hermitage/#_1","title":"\u0418\u0434\u0435\u044f","text":"<p>\u041a\u0430\u0436\u0434\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0432\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0441\u0444\u043e\u0440\u043c\u0443\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043a \u044d\u0442\u0438\u043c \u0434\u0430\u043d\u043d\u044b\u043c.  \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u0442\u0430\u0440\u044b\u0439 \u0434\u043e\u0431\u0440\u044b\u0439 SQL, \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0447\u0443\u0442\u044c \u043f\u043e \u043d\u043e\u0432\u0435\u0435, \u043d\u043e \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 \u043d\u044f\u0448\u043d\u044b\u0439 JSON,  \u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438 \u0441\u0443\u0440\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u043f\u0440\u0438\u0435\u0442\u0430\u0440\u043d\u044b\u0439 \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0438\u043b\u0438 \u0435\u0449\u0435 \u043a\u0430\u043a\u043e\u0439 Redis API. </p> <p>\u0412\u043e\u0442 \u0431\u044b\u043b\u043e \u0431\u044b \u0437\u0434\u043e\u0440\u043e\u0432\u043e \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0441\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u0435 \u044d\u0442\u0438 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0437\u0430 \u0435\u0434\u0438\u043d\u044b\u043c \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u0438,  \u043d\u0435 \u0437\u0430\u043c\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u044f\u0441\u044c \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u0438\u043a\u0443 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449 \u0434\u0430\u043d\u043d\u044b\u0445. </p> <p>\u0412 \u043a\u043e\u043d\u0446\u0435 \u043a\u043e\u043d\u0446\u043e\u0432, \u043a\u043e\u0433\u0434\u0430 \u043c\u044b \u0434\u0435\u043b\u0430\u0435\u043c \u0437\u0430\u043a\u0430\u0437 \u0432 \u043a\u0430\u043a\u043e\u043c-\u043d\u0438\u0431\u0443\u0434\u044c \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0435, \u043c\u044b \u043d\u0435 \u0437\u0430\u0434\u0443\u043c\u044b\u0432\u0430\u0435\u043c\u0441\u044f \u043e \u0442\u043e\u043c  \u043a\u0430\u043a \u0443 \u043d\u0438\u0445 \u0443\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u0441\u0442\u0435\u043b\u043b\u0430\u0436\u0438 \u0441 \u0442\u043e\u0432\u0430\u0440\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u0431\u044b \u043d\u0430\u043c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0443\u0434\u043e\u0431\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u0443\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441,  \u0447\u0442\u043e\u0431\u044b \u0431\u0435\u0433\u0430\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u043f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u043c\u0435\u043d\u044c\u0448\u0435. \u041c\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0430\u043a\u0438\u0434\u044b\u0432\u0430\u0435\u043c \u0432 \u0437\u0430\u043a\u0430\u0437 \u043f\u043e\u0437\u0438\u0446\u0438\u0438.</p> <p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 hermitage \u043a\u0430\u043a \u0440\u0430\u0437 \u043e\u043f\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u044f\u043c\u0438 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0438\u0440\u0430 \u0434\u043b\u044f \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a \u0434\u0430\u043d\u043d\u044b\u043c.</p>"},{"location":"components/storage/hermitage/#_2","title":"\u041d\u043e\u0442\u0430\u0446\u0438\u044f","text":"<p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u043d\u044b\u0445 \u0447\u0430\u0441\u0442\u0435\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u0443\u044e \u043d\u043e\u0442\u0430\u0446\u0438\u044e hermitage.</p> <p>\u0414\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0430 \u0441\u0432\u044f\u0437\u0435\u0439 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 \u0440\u0438\u0441\u0443\u043d\u043a\u0435 \u043d\u0438\u0436\u0435</p> <p></p> <p>\u0417\u0434\u0435\u0441\u044c \u0441\u043f\u043b\u043e\u0448\u043d\u044b\u0435 \u0441\u0442\u0440\u0435\u043b\u043a\u0438 \u043e\u0437\u043d\u0430\u0447\u0430\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u043f\u0443\u043d\u043a\u0442\u0438\u0440\u043d\u044b\u0435 - \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432\u043d\u0443\u0442\u0440\u044c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430.</p>"},{"location":"components/storage/hermitage/#invoice","title":"Invoice","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0432 \u043d\u0435\u043c \u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043d\u044b\u0435 \u0447\u0430\u0441\u0442\u0438 (\u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f)</p> <pre><code>from hermitage.notation import Invoice\n\ninvoice = Invoice() # \u041f\u0443\u0441\u0442\u043e\u0439, \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439, \u043d\u043e \u0440\u0430\u0431\u043e\u0447\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\n</code></pre>"},{"location":"components/storage/hermitage/#bucket","title":"Bucket","text":"<p>\u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438 - \u043d\u0430\u0431\u043e\u0440 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439 \u0435\u0434\u0438\u043d\u0438\u0446 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f (Item, \u0441\u043c. \u043d\u0438\u0436\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438).  \u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438 \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0432 \u0440\u0435\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0411\u0414, \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043e\u0440\u0438\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439, s3 bucket,  \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u043d\u0430 \u0436\u0435\u0441\u0442\u043a\u043e\u043c \u0434\u0438\u0441\u043a\u0435 \u0438 \u0442\u0434.</p> <p>\u0423 \u0431\u0430\u043a\u0435\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0438\u043c\u044f.</p> <pre><code>from hermitage.notation import Invoice, Bucket\n\ninvoice = Invoice(\n    Bucket(\"users\")\n) # \u0427\u0443\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043e\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u044b\u0439 \u0438 \u043f\u043e-\u043f\u0440\u0435\u0436\u043d\u0435\u043c\u0443 \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439, \u043d\u043e \u0440\u0430\u0431\u043e\u0447\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\n</code></pre> <p>\u0411\u0430\u043a\u0435\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u0432\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u0440\u0443\u0433 \u0432 \u0434\u0440\u0443\u0433\u0430, \u0434\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u0443\u044f \u0441\u0432\u043e\u0438 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f </p> <pre><code>from hermitage.notation import Invoice, Bucket\n\ninvoice = Invoice(\n    Bucket(\n        \"users\",\n        Bucket(\n            \"articles\",\n            Bucket(\n                \"comments\"\n            )\n        )\n    )\n)\n</code></pre> <p>\u0411\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u043c\u0443 \u0431\u0430\u043a\u0435\u0442\u0443 \u0432 \u043a\u0430\u043a\u043e\u0439 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u0435\u0434\u0438\u043d\u0438\u0446\u0435 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0435\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b <pre><code>from hermitage.notation import Invoice, Bucket\n\ninvoice = Invoice(\n    Bucket(\n        \"users\",\n        Bucket(\n            \"articles\",\n        ).label(\"user_articles\")\n    )\n)\n</code></pre></p> <p>\u0411\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u043c\u0443 \u0431\u0430\u043a\u0435\u0442\u0443 \u0432 \u043a\u0430\u043a\u043e\u043c \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0435\u0433\u043e \u043d\u0443\u0436\u043d\u043e \u0438\u043d\u0442\u0435\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0438 \u0441\u0445\u0435\u043c\u044b \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0439.  \u042d\u0442\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u043a\u043e\u0433\u0434\u0430 \u043e\u0434\u0438\u043d \u0438 \u0442\u043e\u0442 \u0436\u0435 \u0431\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435\u0441\u0442\u0438 \u0440\u0430\u0437\u043d\u044b\u0439 \u0441\u0435\u043c\u0430\u043d\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u043c\u044b\u0441\u043b.  \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0430\u043c \u043d\u0430\u0434\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u0438 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0430\u0432\u0442\u043e\u0440\u0430 \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430.  \u041d\u043e \u0430\u0432\u0442\u043e\u0440 \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u044d\u0442\u043e \u043d\u0430\u0441\u043b\u0435\u0434\u043d\u0438\u043a\u0438 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0438 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 \u043e\u0434\u043d\u043e\u043c \u0431\u0430\u043a\u0435\u0442\u0435 users.  \u0412 \u0442\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u044b \u043b\u0435\u0433\u043a\u043e \u043c\u043e\u0436\u0435\u043c \u0432\u044b\u0440\u0430\u0437\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043d\u0430\u043c\u0435\u0440\u0435\u043d\u0438\u044f, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043c\u0435\u0442\u043e\u0434 qua \u0431\u0430\u043a\u0435\u0442\u0430.</p> <pre><code>from hermitage.notation import Invoice, Bucket\n\ninvoice = Invoice(\n    Bucket(\n        \"articles\",\n        Bucket(\n            \"users\",\n        ).qua(\"author\"),\n        Bucket(\n            \"users\",\n        ).qua(\"editor\")\n    )\n)\n</code></pre> <p>qua \u0438 label \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c</p> <p><pre><code>from hermitage.notation import Invoice, Bucket\n\ninvoice = Invoice(\n    Bucket(\n        \"articles\",\n        Bucket(\n            \"users\",\n        ).qua(\"author\").label(\"article_author\"),\n        Bucket(\n            \"users\",\n        ).qua(\"editor\").label(\"article_editor\"),\n    )\n)\n</code></pre> \u0413\u043b\u0430\u0432\u043d\u043e\u0435 - \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0447\u0442\u043e qua \u043f\u0440\u043e \u0441\u0435\u043c\u0430\u043d\u0442\u0438\u043a\u0443, \u0430 label \u043f\u0440\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430.</p>"},{"location":"components/storage/hermitage/#item","title":"Item","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0435\u0434\u0438\u043d\u0438\u0446\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f. \u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438 \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0435/\u0441\u0442\u0440\u043e\u043a\u0430 \u0432 \u0411\u0414, \u0444\u0430\u0439\u043b \u043d\u0430 \u0434\u0438\u0441\u043a\u0435, \u043f\u043e\u043b\u0435/\u0441\u0442\u0440\u043e\u043a\u0430 \u0432 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0438 \u0442\u0434</p> <pre><code>from hermitage.notation import Invoice, Bucket, Item\n\ninvoice = Invoice(\n    Bucket(\n        \"articles\",\n        Item(\"id\"),\n        Item(\"title\"),\n        Item(\"content\"),\n        Bucket(\n            \"users\",\n            Item(\"id\"),\n            Item(\"name\")\n        ).qua(\"author\"),\n    )\n) # \u041f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u044b\u0439, \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439 \u0438 \u0440\u0430\u0431\u043e\u0447\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441.\n</code></pre> <p>\u0422\u0430\u043a \u0436\u0435 Item \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0441\u043b\u043e\u0432\u0430\u0440\u044c. \u041e\u0431\u044b\u0447\u043d\u043e, \u044d\u0442\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u0432 \u0438\u043d\u0432\u043e\u0439\u0441\u0430\u0445 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c (\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e\u0431 \u044d\u0442\u043e\u043c \u0447\u0443\u0442\u044c \u043f\u043e\u0437\u0434\u043d\u0435\u0435) <pre><code>from hermitage.notation import Invoice, Bucket, Item\n\ninvoice = Invoice(\n    Bucket(\n        \"articles\",\n        Item(\n            dict(\n                id=1,\n                title=\"About the nature of things\",\n                content=\"WIP\"\n            )\n        )\n    )\n)\n</code></pre></p>"},{"location":"components/storage/hermitage/#clause","title":"Clause","text":"<p>\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0446\u0438\u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044f. \u0412 SQL \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0431\u043b\u0438\u0437\u043a\u0438\u0435 \u0430\u043d\u0430\u043b\u043e\u0433\u0438: WHERE, ORDER BY, GROUP BY</p> <pre><code>import datetime\nimport zodchy\nfrom hermitage.notation import (\n    Invoice,\n    Bucket,\n    Item,\n    Clause\n)\n\ninvoice1 = Invoice(\n    Bucket(\n        \"articles\",\n        Item(\"id\"),\n        Item(\"title\"),\n        Item(\"content\"),\n        Clause(\n            \"created_at\", \n            zodchy.operators.GT(datetime.datetime(2024, 7, 1))\n        )\n    )\n) # \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0441\u0442\u0430\u0442\u044c\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435 1 \u0438\u044e\u043b\u044f 2024 \u0433\u043e\u0434\u0432\n\ninvoice2 = Invoice(\n    Bucket(\n        \"articles\",\n        Item(\"id\"),\n        Item(\"title\"),\n        Item(\"content\"),\n        Clause(\n            \"created_at\", \n            zodchy.operators.DESC()\n        )\n    )\n) # \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0441\u0442\u0430\u0442\u044c\u0438, \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0434\u0430\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 \u0441\u0430\u043c\u043e\u0439 \u043d\u043e\u0432\u043e\u0439\n</code></pre> <p>Clause \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0431\u044a\u0435\u0434\u0435\u043d\u044b \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430\u043c\u0438  (\u0435\u0441\u043b\u0438 \u044d\u0442\u043e \u0441\u0435\u043c\u0430\u043d\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0430\u0432\u0434\u0430\u043d\u043d\u043e, \u043a\u043e\u043d\u0435\u0447\u043d\u043e. \u041d\u0435\u0442 \u0441\u043c\u044b\u043b\u0430 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0435 ORDER \u0438 WHERE)</p> <pre><code>import datetime\nfrom zodchy.operators import EQ, GT, SET\nfrom hermitage.notation import Clause\n\nclause = (Clause(\"id\", EQ(12)) | Clause(\"id\", EQ(13))) &amp; Clause(\"created_at\", GT(datetime.datetime(2024,7,1))) \n\n# \u041f\u0435\u0440\u0432\u0430\u044f \u0447\u0430\u0441\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432 \u0441\u043a\u043e\u0431\u043a\u0430\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0418\u041b\u0418. \u0412 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043e\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u0430 \n# \u043d\u0430 \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0435: Clause(\"id\", SET(12, 13))\n</code></pre>"},{"location":"components/storage/hermitage/#slice","title":"Slice","text":"<p>\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0446\u0438\u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u0430 \u043d\u0430\u0440\u0435\u0437\u043a\u0438 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043d\u0430 \u043f\u043e\u0440\u0446\u0438\u0438 <pre><code>import zodchy\nfrom hermitage.notation import (\n    Invoice,\n    Bucket,\n    Item,\n    Slice\n)\n\ninvoice1 = Invoice(\n    Bucket(\n        \"articles\",\n        Item(\"id\"),\n        Item(\"title\"),\n        Item(\"content\"),\n        Slice(zodchy.operators.Limit(100)),\n        Slice(zodchy.operators.Offset(10)),\n    )\n) # \u0412\u044b\u0434\u0430\u0442\u044c 100 \u0441\u0442\u0430\u0442\u0435\u0439, \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 10-\u043e\u0439\n</code></pre></p> <p>\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 Slice \u043e\u0442 Clause, \u043f\u043e\u043c\u0438\u043c\u043e \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u043e\u0439 \u0441\u0435\u043c\u0430\u043d\u0442\u0438\u043a\u0438, \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0446\u0435\u043b\u0435\u0432\u043e\u0433\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430.</p>"},{"location":"components/storage/hermitage/#metaelement","title":"MetaElement","text":"<p>\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0430\u043d\u043d\u044b\u0445. \u0412 \u0440\u0430\u043c\u043a\u0430\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0434\u0432\u0430 \u043c\u0435\u0442\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430:</p> <ul> <li>Total - \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u043d\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u043c \u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a</li> <li>Upsert - \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0447\u0442\u043e Item \u043d\u0443\u0436\u043d\u043e \u0438\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043b\u0438 \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c (\u043f\u0440\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043f\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044e)</li> </ul> <pre><code>import zodchy\nfrom hermitage.notation import (\n    Invoice,\n    Bucket,\n    Item,\n    Slice,\n    Total,\n    Upsert\n)\n\ninvoice1 = Invoice(\n    Bucket(\n        \"articles\",\n        Item(\"id\"),\n        Item(\"title\"),\n        Item(\"content\"),\n        Slice(zodchy.operators.Limit(10)),\n        Total()\n    )\n) # \u0412\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 (10 \u0437\u0430\u043f\u0438\u0441\u0435\u0439) \u0438 \u0440\u044f\u0434\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0438\u0442\u044c \u043e\u0431\u0449\u0435\u0435 \u0438\u0445 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \n\ninvoice2 = Invoice(\n    Bucket(\n        \"articles\",\n        Item(\n            dict(\n                title=\"Hello\",\n            )\n        ),\n        Upsert(Clause(\"id\", zodchy.operators.EQ(12)))\n    )\n) # \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u0441 id=12, \u0435\u0441\u043b\u0438 \u0442\u0430\u043a\u0430\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 - \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c\n</code></pre>"},{"location":"components/storage/hermitage/#view","title":"View","text":"<p>\u041e\u0431\u0435\u0440\u0442\u043a\u0430 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u0432\u044b\u0431\u043e\u0440\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445</p> <pre><code>from hermitage.notation import View\n\n# Do some calulations\n\nview = View(data=data, meta={'total': total})\n</code></pre>"},{"location":"components/storage/hermitage/#_3","title":"\u0410\u0434\u0430\u043f\u0442\u0435\u0440\u044b","text":"<p>\u0422\u0430\u043a \u043a\u0430\u043a \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e zodchy \u0441\u0442\u0435\u043a\u0430, \u0442\u043e \u0432 \u043d\u0435\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0430\u0434\u0430\u043f\u0442\u0435\u0440,  \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 CQEA \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b \u0432 hermitage \u043d\u043e\u0442\u0430\u0446\u0438\u044e,  \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u0443\u044e \u0432\u044b\u0448\u0435.</p> <p><pre><code>import zodchy\nfrom hermitage.adapters import CQEA\n\n# \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c \u0448\u0430\u0431\u043b\u043e\u043d \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0433\u0434\u0435 \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e \u0437\u0430\u0434\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e id \u0438/\u0438\u043b\u0438 name \u0438 \n# \u0442\u0430\u043a\u0436\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c/\u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u043e name\n\nclass GetUsersQuery(zodchy.codex.cqea.Query):\n    id: zodchy.codex.query.FilterBit[int] | None = None\n    name: zodchy.codex.query.FilterBit[int] | zodchy.codex.query.OrderBit | None = None\n\n# \u0441\u0430\u043c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u0442\u0430\u043a\njohns = GetUsersQuery(\n    name=zodchy.operators.LIKE('john') + zodchy.operators.DESC(),\n    id=zodchy.codex.query.GTE(10)\n) # \u043d\u0430\u0439\u0434\u0435\u043c \u0432\u0441\u0435\u0445 \u0414\u0436\u043e\u043d\u043e\u0432 \u0438 \u0414\u0436\u043e\u043d\u043d\u0438 \u0438 \u043f\u0440\u043e\u0447\u0438\u0445 \u0414\u0436\u043e\u0430\u043d\u043d, \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 id=10 \u0438 \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e\u0435 \u043f\u043e id \u043e\u0442 \u0431\u043e\u043b\u044c\u0448\u0435\u0433\u043e \u043a \u043c\u0435\u043d\u044c\u0448\u0435\u043c\u0443 \n\n# \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u0430\nadapter = CQEA()\n\n# \u0438 \u0441\u043a\u0430\u0440\u043c\u043b\u0438\u0432\u0430\u0435\u043c \u0435\u043c\u0443 CQEA \u0437\u0430\u043f\u0440\u043e\u0441\n\ndata_query = adapter(johns) # \u043d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 DataElement \n\nprint(list(data_query))\n# &gt;&gt;&gt; [\n#     Clause(name='name', operation=zodchy.operators.LIKE('john)), \n#     Clause(name='id', operation=zodchy.operators.GTE(10)), \n#     Clause(name='name', operation=zodchy.operators.DESC())\n#   ]\n</code></pre> \u0418 \u0434\u0430\u043b\u044c\u0448\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0438\u0439\u0441\u044f \u0437\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c\u0443 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u0443, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u0442 \u044d\u0442\u043e\u0442 \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441  \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443\u044e \u0444\u043e\u0440\u043c\u0443 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430, \u043a \u043f\u0440\u0438\u043c\u0435\u0440\u0443 SqlAlchemy adapter</p> <p>\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u0443\u0442\u044c \u0440\u0435\u0437\u043e\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 - \u0437\u0430\u0447\u0435\u043c \u0432\u0441\u044f \u044d\u0442\u0430 \u0446\u0435\u043f\u043e\u0447\u043a\u0430 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0439?  \u041e\u0442\u0432\u0435\u0442 \u0432\u044b\u0445\u043e\u0434\u0438\u0442 \u0437\u0430 \u0440\u0430\u043c\u043a\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 hermitage, \u043d\u043e \u0435\u0441\u043b\u0438 \u0432\u043a\u0440\u0430\u0442\u0446\u0435 - \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0437\u043e\u043d \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438.  zodchy.codex.cqea.Query \u044d\u0442\u043e \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u0431\u0438\u0437\u043d\u0435\u0441 \u043b\u043e\u0433\u0438\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u043e \u0431\u0438\u0437\u043d\u0435\u0441 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0443,  \u044d\u0442\u0430 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u043c\u043e\u0436\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u043f\u0435\u0440\u0435\u0440\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f, \u043e\u0431\u0440\u0430\u0441\u0442\u0430\u044f \u043d\u043e\u0432\u044b\u043c\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0430\u0443\u0434\u0438\u0442\u0430),  \u0447\u0442\u043e\u0431\u044b \u0432 \u0438\u0442\u043e\u0433\u0435 \u043f\u0440\u0438\u0439\u0442\u0438 \u0432 \u0441\u043b\u043e\u0439 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f, \u0433\u0434\u0435 \u043e\u043d\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u0440\u0430\u0436\u0435\u043d\u0430 \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443\u044e \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u044e \u043f\u043e\u043b\u0435\u0439 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f. </p> <p>\u041e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0432\u044b\u0448\u0435 \u0430\u0434\u0430\u043f\u0442\u0435\u0440 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0435\u0439 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438 \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u044f \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 QUERY 1 \u0432 1  \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u043f\u043e\u043b\u044f \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f. \u0412 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u043f\u0438\u0441\u0430\u0442\u044c \u0440\u0443\u0447\u043d\u043e\u0435 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435</p> <p>\u0415\u0441\u043b\u0438 \u0436\u0435 \u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c hermitage \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445 \u0431\u0435\u0437 CQEA, \u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0439 \u0430\u0434\u0430\u043f\u0442\u0435\u0440 \u043c\u043e\u0436\u043d\u043e \u0438 \u043d\u0435 \u0438\u0437\u0443\u0447\u0430\u0442\u044c.</p>"},{"location":"components/storage/hermitage/#_4","title":"\u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438","text":"<p>\u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c (transformer) - callable \u043e\u0431\u044a\u0435\u043a\u0442, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0439 \u043a \u043f\u043e\u043b\u044e \u0437\u0430\u043f\u0440\u043e\u0441\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0441\u0432\u044f\u0437\u043a\u0435 \u0441 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u043e\u043c</p> <p>\u0412\u043e\u0437\u044c\u043c\u0435\u043c \u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u0437 \u043f\u0440\u043e\u0448\u043b\u043e\u0433\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 <pre><code>from hermitage.adapters.transformer import Replace\n\njohns = GetUsersQuery(\n    name=zodchy.operators.LIKE('john') + zodchy.operators.DESC(),\n    id=zodchy.codex.query.GTE(10)\n)\n\n# \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c, \u0447\u0442\u043e \u0443 \u043d\u0430\u0441 \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u043e\u0441\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0432 \u0411\u0414 c name \u043d\u0430 user_name, \n# \u043d\u043e \u043c\u044b \u043d\u0435 \u0445\u043e\u0442\u0438\u043c \u0438\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0431\u0438\u0437\u043d\u0435\u0441 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 GetUsersQuery (\u0438 \u043d\u0435 \u043d\u0430\u0434\u043e, \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0432\u0435\u0441\u044c \u044d\u0442\u043e\u0442 bicycle race \u0438 \u0437\u0430\u0434\u0443\u043c\u044b\u0432\u0430\u043b\u0441\u044f),\n# \u043f\u043e\u044d\u0442\u043e\u043c\u0443, \u043c\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0432 \u0430\u0434\u0430\u043f\u0442\u0435\u0440 \u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0435\u0440 Rreplace \n\nadapter = CQEA()\ndata_query = adapter(johns, Replace(search_field='name', replace_field=\"user_name\"))\n\n# \u0438 \u043d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 Clause(name=\"user_name\", operation=zodchy.operators.LIKE('john)). \u041f\u043e\u0431\u0435\u0434\u0430\n</code></pre></p> <p>\u0410 \u0442\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c \u0447\u0442\u043e \u0438\u0437\u043e\u0449\u0440\u0435\u043d\u043d\u044b\u0439 \u0432\u0438\u0440\u0443\u0441 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u043b \u043d\u0430 2 \u0432\u0441\u0435 \u0447\u0435\u0442\u043d\u044b\u0435 id \u043d\u0430\u0448\u0438\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.  \u0427\u0435\u043b\u043e\u0432\u0435\u043a \u0441 \u043a\u043b\u044e\u0447\u0430\u043c\u0438 \u043e\u0442 \u0431\u0430\u0437\u044b \u0437\u0430\u043f\u0435\u0440\u0441\u044f \u0432 \u0442\u0443\u0430\u043b\u0435\u0442\u0435 \u0438 \u043f\u043b\u0430\u0447\u0435\u0442, \u0430 \u043d\u0430\u043c \u043d\u0430\u0434\u043e \u0440\u0435\u0448\u0438\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441.  \u0418 \u0441\u043d\u043e\u0432\u0430 \u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0435\u0440 Replace</p> <pre><code># \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438 \u043f\u043e\u043b\u044f\ndef double(x: zodchy.codex.query.FilterBit[int]) -&gt; zodchy.codex.query.FilterBit[int]:\n    return type(x)(x.value * 3)\n\nadapter = CQEA()\n\n# \u0437\u0434\u0435\u0441\u044c \u043c\u044b \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 replace_field \u043d\u0435 \u043d\u0443\u0436\u0435\u043d, \u043f\u0440\u043e\u0441\u0442\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c callable \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c, \n# \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0430 \u043a \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c \u043f\u043e\u043b\u044f, \u0435\u0441\u043b\u0438 \u0442\u0430\u043a\u0438\u0435 \u0431\u0443\u0434\u0443\u0442 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435\ndata_query = adapter(johns, Replace(search_field=\"id\", replace_entity=double))\n</code></pre> <p>\u041c\u043e\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0432\u043e\u0438 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u044b, \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0435\u0441\u0442\u044c \u0432 definitions/contracts/adapters.py</p>"}]}